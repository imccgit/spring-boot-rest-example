node {

    withMaven(
    
    	maven:'maven',
    	jdk: '/Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home'
    
    	) {

        stage('Checkout') {
            git url: 'https://github.com/imccgit/spring-boot-rest-example.git', branch: 'master'
        }

        stage('Test') {
            sh 'mvn clean install -DargLine="-agentpath:/Users/ianmccallum/dynatrace-7.0/agent/lib64/libdtagent.dylib=name=Jenkins_Agent,server=localhost:9998,optionTestRunIdJava=%dtTestrunID%"'

            def pom = readMavenPom file:'pom.xml'
            print pom.version
            env.version = pom.version
        }

    }

}